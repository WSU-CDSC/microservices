# Notes for `vid2watson.rb` and `watson2vtt.rb`

These two scripts are used in combination to generate `.vtt` subtitle files from input audiovisual sources. [vid2watson.rb](https://github.com/WSU-CDSC/microservices/blob/master/vid2watson.rb) is responsible for the first part of the process, sending a source file to IBM Watson for transcription, and storing the raw output. [watson2vtt.rb](https://github.com/WSU-CDSC/microservices/blob/master/watson2vtt.rb) takes the `.json` file generated by `vid2watson.rb` and parses it into a `.vtt` transcript file, with text broken up into four second segments.

## Usage

To use, first you will need to create an account on the IBM Watson service. Then, line 15 of `vid2watson.rb`

'apikey:KEY-GOES-HERE'

must be modified with the API key that is associated with your Watson account.

Additionally, it has been found that Watson changes the base URL for their services from time to time, so make sure to compare the base URL in line 19 with the one that shows up in your Watson dashboard.

After setting up your credentials, simply run the script with an A/V file(s) as an input like, `vid2watson.rb myinput1.mp4 myinput2.mp4`. The script will automatically create a directory and store the outputs of Watson.

Once the first script has completed, take the `.json` file that was created by the process and parse it with the second script in the manner of `watson2vtt.rb myinput.json`.

This will create a `.vtt` file with the same name as the input. This can be viewed alongside its corresponding video if it is in the same directory and has the same name as its source. Simply open the video in a program like [VLC](https://www.videolan.org/vlc/index.html) and the subtitle track should load automatically. 


